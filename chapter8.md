# 序列化框架

序列化是RPC服务框架实现中重要的一环，因为RPC是远程调用，需要数据序列化后传输，接收后再反序列对象。

序列化库也有不同的性能,有些序列化框架会尽量压缩数据和数据类型，有些包含元数据信息，它们的性能表现不尽相同。

对于Go生态圈的序列化框架，有一些开源项目对它们的性能做了对比，比如 [gosercomp](https://github.com/smallnest/gosercomp)做的性能比较：


```benchmark _name iter time/iter alloc bytes/iter allocs/iter-------------------------------------------------------------------------------------------------------------------------BenchmarkMarshalByJson-8 1000000 1137 ns/op 376 B/op 4 allocs/opBenchmarkUnmarshalByJson-8 1000000 2260 ns/op 296 B/op 9 allocs/opBenchmarkMarshalByXml-8 500000 3351 ns/op 4801 B/op 12 allocs/opBenchmarkUnmarshalByXml-8 100000 13278 ns/op 2807 B/op 67 allocs/opBenchmarkMarshalByMsgp-8 20000000 102 ns/op 80 B/op 1 allocs/opBenchmarkUnmarshalByMsgp-8 5000000 266 ns/op 32 B/op 5 allocs/opBenchmarkMarshalByProtoBuf-8 3000000 450 ns/op 328 B/op 5 allocs/opBenchmarkUnmarshalByProtoBuf-8 2000000 754 ns/op 400 B/op 11 allocs/opBenchmarkMarshalByGogoProtoBuf-8 20000000 99.0 ns/op 48 B/op 1 allocs/opBenchmarkUnmarshalByGogoProtoBuf-8 5000000 389 ns/op 144 B/op 8 allocs/opBenchmarkMarshalByFlatBuffers-8 5000000 352 ns/op 16 B/op 1 allocs/opBenchmarkUnmarshalByFlatBuffers-8 500000000 3.48 ns/op 0 B/op 0 allocs/opBenchmarkUnmarshalByFlatBuffers_withFields-8 10000000 157 ns/op 0 B/op 0 allocs/opBenchmarkMarshalByThrift-8 3000000 517 ns/op 64 B/op 1 allocs/opBenchmarkUnmarshalByThrift-8 1000000 1224 ns/op 656 B/op 11 allocs/opBenchmarkMarshalByAvro-8 2000000 889 ns/op 133 B/op 7 allocs/opBenchmarkUnmarshalByAvro-8 500000 3128 ns/op 1680 B/op 63 allocs/opBenchmarkMarshalByGencode-8 50000000 37.2 ns/op 0 B/op 0 allocs/opBenchmarkUnmarshalByGencode-8 10000000 139 ns/op 32 B/op 5 allocs/opBenchmarkMarshalByCodecAndCbor-8 2000000 697 ns/op 239 B/op 2 allocs/opBenchmarkUnmarshalByCodecAndCbor-8 10000000 149 ns/op 0 B/op 0 allocs/opBenchmarkMarshalByCodecAndMsgp-8 2000000 676 ns/op 239 B/op 2 allocs/opBenchmarkUnmarshalByCodecAndMsgp-8 10000000 158 ns/op 0 B/op 0 allocs/opBenchmarkMarshalByGoMemdump-8 300000 5217 ns/op 1487 B/op 31 allocs/opBenchmarkUnmarshalByGoMemdump-8 3000000 474 ns/op 112 B/op 5 allocs/op```
